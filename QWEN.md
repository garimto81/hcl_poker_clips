# HCL Poker Clips 자동 다운로드 앱 - QWEN Context

## 프로젝트 개요

HCL Poker Clips 자동 다운로드 앱은 YouTube 채널 "https://www.youtube.com/@HCLPokerClips/videos"의 동영상을 매일 자동으로 다운로드 받는 웹 기반 애플리케이션입니다. YouTube의 정책 변경에 대비한 회피 전략을 포함하여 지속적으로 동영상을 다운로드 받을 수 있도록 설계되었습니다.

## 주요 목적

- HCL Poker Clips 채널의 동영상을 자동으로 다운로드
- YouTube 정책 변경에 따른 차단을 우회하는 회피 전략 구현
- 웹 기반 인터페이스 제공
- 일일 자동 실행 및 다운로드 상태 모니터링

## 아키텍처 개요

### 블록화 + 에이전트 시스템 (Block Agent System)

이 프로젝트는 블록화와 에이전트 시스템을 기반으로 한 아키텍처를 채택하고 있습니다. 이 구조는 AI 컨텍스트 최적화를 위해 설계되었으며, 다음과 같은 주요 특징을 가집니다:

#### 1. 블록화 (Block System)
- **단일 책임 원칙**: 하나의 블록은 하나의 관심사만 담당
- **수직 분할 (Vertical Slicing)**: 기능 단위로 관련된 모든 코드를 하나의 블록에 포함
- **자체 완결성 (Self-Contained)**: 블록은 자체적으로 완결적인 기능을 제공

#### 2. 에이전트 시스템 (Agent System)
- **계층적 구조**: 오케스트레이터 → 도메인 에이전트 → 블록 에이전트
- **역할 분리**: 각 에이전트는 특정 도메인 또는 블록을 전담
- **지능형 조정**: 오케스트레이터가 전체 워크플로우를 조정

#### 3. 도메인 구조
- **Auth Domain**: 인증/인가 관련 기능
- **Content Domain**: 콘텐츠 조회 및 캐시 관리
- **Stream Domain**: 스트리밍 관련 기능
- **Search Domain**: 검색 기능

### 시스템 구성도
```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────────┐
│   사용자 UI     │◄──►│   웹 서버        │◄──►│   작업 스케줄러     │
│ (웹 브라우저)   │    │ (API 서버)       │    │ (Cron/Scheduler)    │
└─────────────────┘    └──────────────────┘    └─────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐    ┌─────────────────────┐
                    │   다운로드 큐    │◄──►│   다운로드 엔진     │
                    │   (Redis/RabbitMQ)│    │   (Headless Chrome) │
                    └──────────────────┘    └─────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   데이터베이스   │
                    │   (PostgreSQL)   │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   파일 저장소    │
                    │   (Local/Cloud)  │
                    └──────────────────┘
```

## 기술 스택

- **프론트엔드**: React.js 또는 Vue.js
- **백엔드**: Node.js/Express.js 또는 Python/FastAPI
- **데이터베이스**: PostgreSQL 또는 MongoDB
- **다운로드 엔진**: Headless Chrome 기반
- **프록시 관리**: 다중 프록시 회전 시스템
- **큐 관리**: Redis, RabbitMQ 또는 Bull Queue
- **캐싱**: Redis
- **스트리밍**: FFmpeg, HLS

## 핵심 기능

### 1. 자동 일일 다운로드
- HCL Poker Clips 채널의 새로운 동영상 자동 검색
- 설정 가능한 스케줄에 따른 다운로드
- 화질 선택 옵션 (가장 높은 화질, 1080p, 720p 등)
- 중복 다운로드 방지 기능

### 2. 내결함성 다운로드 시스템
- 차단 상황 시 대체 방법 제공
- 지수 백오프 방식의 재시도 메커니즘
- 중단된 다운로드의 재개 기능
- 자동 오류 감지 및 복구

### 3. 회피 전략
- **시그니처 난독화 대응**: 실시간 시그니처 추출 알고리즘 업데이트, 다중 추출 방법 구현
- **속도 제한 회피**: 지능형 요청 조절 및 무작위 지연, 다중 프록시 회전
- **CAPTCHA 처리**: CAPTCHA 해결 서비스 통합, 챌린지 해결을 위한 브라우저 자동화
- **적응형 기법**: 차단 지표의 지속적 모니터링, 대체 방법 자동 전환

## 파일 구조

```
C:\claude\HCL_Poker_Clips\
├── Architecture_Design.md       # 시스템 아키텍처 설계서
├── Evasion_Strategy.md          # 회피 전략 설계서
├── Product_Requirements_Document.md # 제품 요구사항 문서
├── README.md                   # 프로젝트 개요
├── docs/
│   └── block_agent_system.md   # 블록-에이전트 시스템 아키텍처 문서
└── ...                         # 기타 파일
```

## 개발 규칙

### 블록 규칙
- 블록은 15~30개 파일 / 30k~50k 토큰 크기를 유지
- 단일 책임 원칙 준수
- 자체 완결성 보장 (Self-Contained)
- 외부 파일 직접 수정 금지

### 에이전트 규칙
- 도메인 에이전트는 해당 도메인 블록만 관리
- 블록 에이전트는 단일 블록만 관리
- 오케스트레이터는 전역 조정 및 에러 처리 담당

### 코드 스타일
- 타입스크립트 기반
- Zod 스키마를 사용한 입력 검증
- 오류 처리 및 회로 차단기 적용

## 빌드 및 실행 (예정)

구현이 완료된 후에는 다음과 같은 명령어를 사용하여 빌드 및 실행할 수 있습니다:

- 개발 서버 시작: `npm run dev`
- 빌드: `npm run build`
- 테스트 실행: `npm test`
- 프로덕션 서버 시작: `npm start`

(이 부분은 패키지 파일이 현재 존재하지 않으므로 추후 구현 예정)

## 주요 도전 과제

1. **YouTube 정책 회피**: 자동화 탐지 및 차단 회피
2. **법적 문제**: 저작권 및 이용약관 관련 문제 해결
3. **확장성**: 다수 사용자 및 대량 콘텐츠 처리
4. **안정성**: 지속적인 서비스 제공을 위한 내결함성

## 보안 고려사항

- JWT 기반 인증 시스템
- 민감한 데이터 암호화 (AES-256)
- API 속도 제한 (Rate Limiting)
- CORS 설정 관리
- 네트워크 통신은 HTTPS/TLS 암호화 사용